#!/bin/bash

# kurbeScript - Start Kubernetes cluster, verify, and list pods

echo "Checking if Minikube is installed..."
if ! command -v minikube &> /dev/null
then
    echo "Minikube could not be found. Please install Minikube first."
    exit 1
fi

echo "Checking if kubectl is installed..."
if ! command -v kubectl &> /dev/null
then
    echo "kubectl could not be found. Please install kubectl first."
    exit 1
fi

echo "Checking Minikube status..."
minikube_status=$(minikube status --format '{{.Host}}')

if [ "$minikube_status" != "Running" ]; then
    echo "Starting Minikube cluster..."
    minikube start --driver=docker
else
    echo "Minikube cluster is already running."
fi

echo "Verifying Kubernetes cluster..."
kubectl cluster-info

echo "Listing all pods across all namespaces..."
kubectl get pods -A

echo "Kubernetes setup complete!"

